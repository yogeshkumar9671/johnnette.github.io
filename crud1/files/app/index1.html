{% extends 'base.html' %} {% load static %} {% load crispy_forms_tags %} {% block ven_css %} {% endblock ven_css %} {% block page_css %} {% endblock page_css %} {% block content %}
<h6 class="alert alert-info">Address Filling Form</h6>

<div class="container">
    <div class="row">
        <div class="col-sm-4">
            {% if messages %} {% for message in messages %}
            <div {% if messages %} class="alert alert-{{message.tags}}" {% endif %} role="alert">{{message}}</div>
            {% endfor %} {% endif %}



            <form action="" method="POST" id="indexform" data-couses-url="{% url 'load_data' %}">
                {% csrf_token %} {{ form | crispy }}
                <label for="name">Name</label>
                <input type="text" placeholder="Name" class="form-control" id="name">

                <label for="country">Country</label>
                <select name="country" id="country" class="form-control">
                    <option value="">---select country---</option>
                    {% for country in countries %}
                        <option value="{{ country.id }}">{{ country.name }}</option>
                    {% endfor %}
                </select>

                <label for="">State</label>
                <select name="state" id="state" class="form-control">
                    <!-- <option value="">--selete state---</option>
                    {% for state in states %}
                        <option value="{{ state.id }}">{{ state.name }}</option>
                    {% endfor %} -->
                </select>

                <!-- <label for="">District</label>
                <select name="district" id="district" class="form-control">
                    <option value="">--selete district---</option>
                    {% for district in districts %}
                        <option value="{{ district.id }}">{{ district.name }}</option>
                    {% endfor %}
                </select> -->

                <!-- <label for="">City</label>
                <select name="city" id="city" class="form-control">
                    <option value="">--selete city---</option>
                    {% for city in cities %}
                        <option value="{{ city.id }}">{{ city.name |crispy }}</option>
                    {% endfor %}
                </select> -->

                <br>
                <button type="submit" class="btn btn-primary">Submit</button>
            </form>
        </div>

        <div class="col-sm-8">
            <table class="table">
                <thead>
                    <tr>
                        <th scope="col" colspan="2" style="text-align: center;">Person</th>
                        <th scope="col" colspan="4" style="text-align: center;  border-left: 0.5px solid black; border-right: 0.5px solid black;">Address</th>
                        <th scope="col" colspan="2" style="text-align: center;">Add-Romove</th>
                    </tr>
                    <tr>
                        <th scope="col">sr.</th>
                        <th scope="col">Name</th>
                        <th scope="col">Country</th>
                        <th scope="col">State</th>
                        <th scope="col">District</th>
                        <th scope="col">City</th>
                        <th scope="col">Remove</th>
                        <th scope="col">Add</th>
                    </tr>
                </thead>
                <tbody>
                    {% for add in address %}
                    <tr>
                        <th scope="row">{{ forloop.counter }}</th>
                        <td>{{ add.name }}</td>
                        <td>{{ add.get_country_display }}</td>
                        <td>{{ add.get_state_display }}</td>
                        <td>{{ add.district }}</td>
                        <td>{{ add.city }}</td>
                        <td>
                            <a class="btn btn-danger" href="{% url 'delete' add.id %}">Del</a>
                        </td>
                        <td>
                            <a class="btn btn-primary" href="{% url 'update' add.id %}">Ed</a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>



{% endblock content %} {% block ven_js %} {% endblock ven_js %} {% block page_js %}
<!-- <link rel="stylesheet" href="{% static 'js/script.js' %}"> -->
<!-- <script src="{% static 'js/social_app/main.js' %}"></script> -->
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script>
    $(document).ready(function() {
        $('#country').change(function() {
            var url = $('#indexform').attr("data-couses-url");
            var countryId = $(this).val();

            $.ajax({
                url: url,
                data: {
                    'country': countryId
                },
                success: function(data) {
                    $("#state").html(data);
                }

            });
        });
    });
</script>
{% endblock page_js %}